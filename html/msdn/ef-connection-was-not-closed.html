<html><head><title>Ошибка Entity Framework: The connection was not closed. The connection's current state is connecting</title></head><body>
<p><a href="index.html">Ответы с форумов MSDN</a></p>
<h2>Ошибка Entity Framework: The connection was not closed. The connection's current state is connecting</h2>
<p>Date: 02.10.2019 7:52:45</p>
<div>
<p>&quot;<span style="color:#333333; font-family:'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif; font-size:14px">The connection was not closed. The connection's current state is connecting</span>&quot; как бы на&#1084;екает, что пробле&#1084;а
 не с настройкой подключения, а скорее с синхронизацией потоков. У вас из разных потоков что-нибудь делается с эти&#1084; DbContext? То, что&nbsp;Database.MigrateAsync() - види&#1084;о, асинхронный &#1084;етод - вызывается без ожидания окончания его выполнения,
 это так и заду&#1084;ано?</p>
<p></p>
</div>
<h2>Message 188</h2>
<p>Date: 02.10.2019 10:45:41</p>
<div>
<p>&gt;<span style="color:#333333; font-family:'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif; font-size:14px">Это похоже на пробле&#1084;у с синхронизацией потоков?</span></p>
<p>Ну, это первое, что приходит в голову. Пытае&#1084;ся закрыть соединение, которое еще не открылось - типичное состояние гонки.</p>
<p><span style="color:#333333; font-family:'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif; font-size:14px">&gt;Нет, просто пока не знаю как в конструкторе написать await, если конечно конструктор это поддерживает.</span></p>
<p><span style="color:#333333; font-family:'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif; font-size:14px">Конструктор, конечно, не &#1084;ожет быть асинхронны&#1084; &#1084;етодо&#1084;, но в не&#1084; &#1084;ожно сделать .Wait(), чтобы дождаться
 окончания синхронно.&nbsp;</span></p>
</div>

<hr/><p>Автор: <a href="https://smallsoft2.blogspot.com">VadimTagil</a></p>
<p><a href="https://msdn-whiteknight.github.io/answers/html/">Главная страница</a> - <a href="index.html">Список тем</a> - <a href="https://github.com/MSDN-WhiteKnight/answers">Репозиторий на GitHub</a></p>
</body></html>
